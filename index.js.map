{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js","webpack://tavern_helper_template/src/mood-manager/components/SettingsPanel.vue?7788","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://tavern_helper_template/src/mood-manager/components/StatusPanel.vue?5d52","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/runtime/api.js","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/exportHelper.js","webpack://tavern_helper_template/src/mood-manager/components/StatusPanel.vue?6ba2","webpack://tavern_helper_template/src/mood-manager/components/FloatingBall.vue?3e21","webpack://tavern_helper_template/src/mood-manager/components/SettingsPanel.vue?21c0","webpack://tavern_helper_template/src/mood-manager/components/FloatingBall.vue?dd8d","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/util/script.ts","src://tavern_helper_template/src/mood-manager/store/mood.ts","src://tavern_helper_template/src/mood-manager/components/StatusPanel.vue","webpack://tavern_helper_template/src/mood-manager/components/StatusPanel.vue?d823","src://tavern_helper_template/src/mood-manager/components/FloatingBall.vue","webpack://tavern_helper_template/src/mood-manager/components/FloatingBall.vue?e527","src://tavern_helper_template/src/mood-manager/store/settings.ts","src://tavern_helper_template/src/mood-manager/components/SettingsPanel.vue","webpack://tavern_helper_template/src/mood-manager/components/SettingsPanel.vue?6fc3","src://tavern_helper_template/src/mood-manager/core/message-handler.ts","src://tavern_helper_template/src/mood-manager/index.ts"],"sourcesContent":["/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mood-manager-settings .flex-container[data-v-3c3a3805]{display:flex;align-items:center;gap:10px;margin-bottom:10px}.mood-manager-settings label[data-v-3c3a3805]{width:80px}.mood-manager-settings .text_pole[data-v-3c3a3805]{flex-grow:1}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/mood-manager/components/SettingsPanel.vue\"],\"names\":[],\"mappings\":\"AAiCA,wDACI,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,kBACJ,CACA,8CACI,UACJ,CACA,mDACI,WACJ\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"mood-manager-settings\\\">\\n    <div class=\\\"inline-drawer\\\">\\n      <div class=\\\"inline-drawer-toggle inline-drawer-header\\\">\\n        <b>角色状态心情管理</b>\\n        <div class=\\\"inline-drawer-icon fa-solid fa-circle-chevron-down down\\\"></div>\\n      </div>\\n      <div class=\\\"inline-drawer-content\\\">\\n        <div class=\\\"example-extension_block flex-container\\\">\\n            <label for=\\\"apiUrl\\\">API URL:</label>\\n            <input type=\\\"text\\\" id=\\\"apiUrl\\\" class=\\\"text_pole\\\" v-model=\\\"settings.apiUrl\\\" />\\n        </div>\\n        <div class=\\\"example-extension_block flex-container\\\">\\n            <label for=\\\"apiKey\\\">API Key:</label>\\n            <input type=\\\"text\\\" id=\\\"apiKey\\\" class=\\\"text_pole\\\" v-model=\\\"settings.apiKey\\\" />\\n        </div>\\n        <div class=\\\"example-extension_block flex-container\\\">\\n            <input type=\\\"checkbox\\\" id=\\\"pluginEnabled\\\" v-model=\\\"settings.isEnabled\\\" />\\n            <label for=\\\"pluginEnabled\\\">启用插件</label>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { storeToRefs } from 'pinia';\\nimport { useSettingsStore } from '../store/settings';\\n\\nconst { settings } = storeToRefs(useSettingsStore());\\n</script>\\n\\n<style scoped>\\n.mood-manager-settings .flex-container {\\n    display: flex;\\n    align-items: center;\\n    gap: 10px;\\n    margin-bottom: 10px;\\n}\\n.mood-manager-settings label {\\n    width: 80px;\\n}\\n.mood-manager-settings .text_pole {\\n    flex-grow: 1;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.status-panel[data-v-73af1547]{position:fixed;width:300px;background-color:white;border:1px solid #ccc;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);z-index:9999;cursor:grab}.panel-header[data-v-73af1547]{padding:8px 12px;font-weight:bold;border-bottom:1px solid #eee}.panel-content[data-v-73af1547]{padding:12px}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/mood-manager/components/StatusPanel.vue\"],\"names\":[],\"mappings\":\"AAgCA,+BACE,cAAe,CACf,WAAY,CACZ,sBAAuB,CACvB,qBAAsB,CACtB,iBAAkB,CAClB,sCAAuC,CACvC,YAAa,CACb,WACF,CACA,+BACE,gBAAiB,CACjB,gBAAiB,CACjB,4BACF,CACA,gCACE,YACF\",\"sourcesContent\":[\"<template>\\n  <div ref=\\\"el\\\" class=\\\"status-panel\\\" :style=\\\"{ top: y + 'px', left: x + 'px' }\\\">\\n    <div class=\\\"panel-header\\\">状态控制面板</div>\\n    <div class=\\\"panel-content\\\">\\n      <p>用户状态: {{ latestMood.user }}</p>\\n      <p>角色状态: {{ latestMood.character }}</p>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport { useDraggable, useStorage } from '@vueuse/core';\\nimport { storeToRefs } from 'pinia';\\nimport { useMoodStore } from '../store/mood';\\n\\nconst el = ref<HTMLElement | null>(null);\\n\\n// 1. 面板可拖拽，并持久化位置\\nconst panelPosition = useStorage('mood-manager-panel-position', {\\n  x: window.innerWidth - 400,\\n  y: 100,\\n});\\nconst { x, y } = useDraggable(el, {\\n  initialValue: panelPosition,\\n});\\n\\n// 2. 从 Pinia 获取状态数据\\nconst { latestMood } = storeToRefs(useMoodStore());\\n</script>\\n\\n<style scoped>\\n.status-panel {\\n  position: fixed;\\n  width: 300px;\\n  background-color: white;\\n  border: 1px solid #ccc;\\n  border-radius: 8px;\\n  box-shadow: 0 4px 12px rgba(0,0,0,0.15);\\n  z-index: 9999;\\n  cursor: grab;\\n}\\n.panel-header {\\n  padding: 8px 12px;\\n  font-weight: bold;\\n  border-bottom: 1px solid #eee;\\n}\\n.panel-content {\\n  padding: 12px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_251447f7d19a1c83042fc3163e1c21fc/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./StatusPanel.vue?vue&type=style&index=0&id=73af1547&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"985decd2\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_251447f7d19a1c83042fc3163e1c21fc/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./StatusPanel.vue?vue&type=style&index=0&id=73af1547&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_251447f7d19a1c83042fc3163e1c21fc/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./StatusPanel.vue?vue&type=style&index=0&id=73af1547&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.floating-ball[data-v-a2f564f2]{position:fixed;width:50px;height:50px;border-radius:50%;background-color:#4a90e2;color:white;display:flex;justify-content:center;align-items:center;cursor:grab;-webkit-user-select:none;user-select:none;z-index:10000;font-size:24px;box-shadow:0 2px 10px rgba(0,0,0,0.2)}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/mood-manager/components/FloatingBall.vue\"],\"names\":[],\"mappings\":\"AAsCA,gCACE,cAAe,CACf,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,wBAAyB,CACzB,WAAY,CACZ,YAAa,CACb,sBAAuB,CACvB,kBAAmB,CACnB,WAAY,CACZ,wBAAiB,CAAjB,gBAAiB,CACjB,aAAc,CACd,cAAe,CACf,qCACF\",\"sourcesContent\":[\"<template>\\n  <div>\\n    <div\\n      ref=\\\"el\\\"\\n      class=\\\"floating-ball\\\"\\n      :style=\\\"{ left: x + 'px', top: y + 'px' }\\\"\\n      style=\\\"position: fixed; cursor: grab;\\\"\\n      @click=\\\"togglePanel\\\"\\n    >\\n      <span>M</span>\\n    </div>\\n    <StatusPanel v-if=\\\"isPanelOpen\\\" />\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport { useDraggable, useStorage } from '@vueuse/core';\\nimport StatusPanel from './StatusPanel.vue';\\n\\nconst el = ref<HTMLElement | null>(null);\\nconst isPanelOpen = ref(false);\\n\\nconst position = useStorage('mood-manager-ball-position', {\\n  x: window.innerWidth - 100,\\n  y: 100,\\n});\\n\\nconst { x, y } = useDraggable(el, {\\n  initialValue: position,\\n});\\n\\nconst togglePanel = () => {\\n  isPanelOpen.value = !isPanelOpen.value;\\n};\\n</script>\\n\\n<style scoped>\\n.floating-ball {\\n  position: fixed;\\n  width: 50px;\\n  height: 50px;\\n  border-radius: 50%;\\n  background-color: #4a90e2;\\n  color: white;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: grab;\\n  user-select: none;\\n  z-index: 10000;\\n  font-size: 24px;\\n  box-shadow: 0 2px 10px rgba(0,0,0,0.2);\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_251447f7d19a1c83042fc3163e1c21fc/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsPanel.vue?vue&type=style&index=0&id=3c3a3805&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6a370e97\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_251447f7d19a1c83042fc3163e1c21fc/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsPanel.vue?vue&type=style&index=0&id=3c3a3805&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_251447f7d19a1c83042fc3163e1c21fc/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsPanel.vue?vue&type=style&index=0&id=3c3a3805&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_251447f7d19a1c83042fc3163e1c21fc/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./FloatingBall.vue?vue&type=style&index=0&id=a2f564f2&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6b00308b\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_251447f7d19a1c83042fc3163e1c21fc/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./FloatingBall.vue?vue&type=style&index=0&id=a2f564f2&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.103.0/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_251447f7d19a1c83042fc3163e1c21fc/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./FloatingBall.vue?vue&type=style&index=0&id=a2f564f2&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","export async function loadReadme(url: string): Promise<boolean> {\n  const readme = await fetch(url);\n  if (!readme.ok) {\n    return false;\n  }\n  const readme_text = await readme.text();\n  replaceScriptInfo(readme_text);\n  return true;\n}\n\nexport function teleportStyle() {\n  if ($(`head > div[script_id=\"${getScriptId()}\"]`).length > 0) {\n    return;\n  }\n  const $div = $(`<div>`).attr('script_id', getScriptId()).append($(`head > style`, document).clone());\n  $('head').append($div);\n}\n\nexport function deteleportStyle() {\n  $(`head > div[script_id=\"${getScriptId()}\"]`).remove();\n}\n\nexport function createScriptIdDiv(): JQuery<HTMLDivElement> {\n  return $('<div>').attr('script_id', getScriptId()) as JQuery<HTMLDivElement>;\n}\n\nexport function destroyScriptIdDiv(): void {\n  $(`div[script_id=\"${getScriptId()}\"]`).remove();\n}\n\nexport function reloadOnChatChange(): EventOnReturn {\n  let chat_id = SillyTavern.getCurrentChatId();\n  return eventOn(tavern_events.CHAT_CHANGED, new_chat_id => {\n    if (chat_id !== new_chat_id) {\n      chat_id = new_chat_id;\n      window.location.reload();\n    }\n  });\n}\n","import { defineStore } from 'pinia';\nimport { ref } from 'vue';\n\ninterface MoodState {\n  user: string;\n  character: string;\n}\n\nexport const useMoodStore = defineStore('moodManagerMood', () => {\n  const latestMood = ref<MoodState>({\n    user: 'N/A',\n    character: 'N/A',\n  });\n\n  function updateUserMood(mood: string) {\n    latestMood.value.user = mood;\n  }\n\n  function updateCharacterMood(mood: string) {\n    latestMood.value.character = mood;\n  }\n\n  return {\n    latestMood,\n    updateUserMood,\n    updateCharacterMood,\n  };\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"panel-content\" };\nimport { ref } from 'vue';\nimport { useDraggable, useStorage } from '@vueuse/core';\nimport { storeToRefs } from 'pinia';\nimport { useMoodStore } from '../store/mood';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'StatusPanel',\n    setup(__props) {\n        const el = ref(null);\n        // 1. 面板可拖拽，并持久化位置\n        const panelPosition = useStorage('mood-manager-panel-position', {\n            x: window.innerWidth - 400,\n            y: 100,\n        });\n        const { x, y } = useDraggable(el, {\n            initialValue: panelPosition,\n        });\n        // 2. 从 Pinia 获取状态数据\n        const { latestMood } = storeToRefs(useMoodStore());\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                ref_key: \"el\",\n                ref: el,\n                class: \"status-panel\",\n                style: _normalizeStyle({ top: _unref(y) + 'px', left: _unref(x) + 'px' })\n            }, [\n                _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"panel-header\" }, \"状态控制面板\", -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createElementVNode(\"p\", null, \"用户状态: \" + _toDisplayString(_unref(latestMood).user), 1 /* TEXT */),\n                    _createElementVNode(\"p\", null, \"角色状态: \" + _toDisplayString(_unref(latestMood).character), 1 /* TEXT */)\n                ])\n            ], 4 /* STYLE */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./StatusPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StatusPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StatusPanel.vue?vue&type=style&index=0&id=73af1547&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-73af1547\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nimport { ref } from 'vue';\nimport { useDraggable, useStorage } from '@vueuse/core';\nimport StatusPanel from './StatusPanel.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'FloatingBall',\n    setup(__props) {\n        const el = ref(null);\n        const isPanelOpen = ref(false);\n        const position = useStorage('mood-manager-ball-position', {\n            x: window.innerWidth - 100,\n            y: 100,\n        });\n        const { x, y } = useDraggable(el, {\n            initialValue: position,\n        });\n        const togglePanel = () => {\n            isPanelOpen.value = !isPanelOpen.value;\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", null, [\n                _createElementVNode(\"div\", {\n                    ref_key: \"el\",\n                    ref: el,\n                    class: \"floating-ball\",\n                    style: _normalizeStyle([{ left: _unref(x) + 'px', top: _unref(y) + 'px' }, { \"position\": \"fixed\", \"cursor\": \"grab\" }]),\n                    onClick: togglePanel\n                }, [...(_cache[0] || (_cache[0] = [\n                        _createElementVNode(\"span\", null, \"M\", -1 /* CACHED */)\n                    ]))], 4 /* STYLE */),\n                (isPanelOpen.value)\n                    ? (_openBlock(), _createBlock(StatusPanel, { key: 0 }))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./FloatingBall.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./FloatingBall.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./FloatingBall.vue?vue&type=style&index=0&id=a2f564f2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a2f564f2\"]])\n\nexport default __exports__","import { useStorage } from '@vueuse/core';\nimport { defineStore } from 'pinia';\n\n// 定义设置的数据结构\ninterface Settings {\n  isEnabled: boolean;\n  apiUrl: string;\n  apiKey: string;\n}\n\n// 默认设置\nconst defaultSettings: Settings = {\n  isEnabled: true,\n  apiUrl: '',\n  apiKey: '',\n};\n\nexport const useSettingsStore = defineStore('moodManagerSettings', () => {\n  // 使用 useStorage 将设置持久化到 localStorage\n  const settings = useStorage('mood-manager-settings', defaultSettings, localStorage, {\n    mergeDefaults: true,\n  });\n\n  return { settings };\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"mood-manager-settings\" };\nconst _hoisted_2 = { class: \"inline-drawer\" };\nconst _hoisted_3 = { class: \"inline-drawer-content\" };\nconst _hoisted_4 = { class: \"example-extension_block flex-container\" };\nconst _hoisted_5 = { class: \"example-extension_block flex-container\" };\nconst _hoisted_6 = { class: \"example-extension_block flex-container\" };\nimport { storeToRefs } from 'pinia';\nimport { useSettingsStore } from '../store/settings';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SettingsPanel',\n    setup(__props) {\n        const { settings } = storeToRefs(useSettingsStore());\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"inline-drawer-toggle inline-drawer-header\" }, [\n                        _createElementVNode(\"b\", null, \"角色状态心情管理\"),\n                        _createElementVNode(\"div\", { class: \"inline-drawer-icon fa-solid fa-circle-chevron-down down\" })\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _cache[3] || (_cache[3] = _createElementVNode(\"label\", { for: \"apiUrl\" }, \"API URL:\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                type: \"text\",\n                                id: \"apiUrl\",\n                                class: \"text_pole\",\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(settings).apiUrl) = $event))\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, _unref(settings).apiUrl]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _cache[4] || (_cache[4] = _createElementVNode(\"label\", { for: \"apiKey\" }, \"API Key:\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                type: \"text\",\n                                id: \"apiKey\",\n                                class: \"text_pole\",\n                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(settings).apiKey) = $event))\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, _unref(settings).apiKey]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _withDirectives(_createElementVNode(\"input\", {\n                                type: \"checkbox\",\n                                id: \"pluginEnabled\",\n                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(settings).isEnabled) = $event))\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelCheckbox, _unref(settings).isEnabled]\n                            ]),\n                            _cache[5] || (_cache[5] = _createElementVNode(\"label\", { for: \"pluginEnabled\" }, \"启用插件\", -1 /* CACHED */))\n                        ])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SettingsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SettingsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SettingsPanel.vue?vue&type=style&index=0&id=3c3a3805&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3c3a3805\"]])\n\nexport default __exports__","import { useMoodStore } from '../store/mood';\nimport { useSettingsStore } from '../store/settings';\n\n/**\n * 当聊天消息更新时触发此函数\n */\nasync function onMessageUpdate() {\n  const settingsStore = useSettingsStore();\n  const { isEnabled, apiUrl, apiKey } = settingsStore.settings;\n\n  // 1. 检查插件是否启用\n  if (!isEnabled || !apiUrl) {\n    return;\n  }\n\n  const latestMessage = SillyTavern.chat.slice(-1)[0];\n\n  if (!latestMessage) return;\n\n  const contentToAnalyze = latestMessage.mes;\n\n  try {\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        ...SillyTavern.getRequestHeaders(),\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${apiKey}`,\n      },\n      body: JSON.stringify({\n        text: contentToAnalyze,\n        is_user: latestMessage.is_user,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`API request failed with status ${response.status}`);\n    }\n\n    const data = await response.json();\n\n    const moodStore = useMoodStore();\n    if (latestMessage.is_user) {\n      moodStore.updateUserMood(data.mood);\n    } else {\n      moodStore.updateCharacterMood(data.mood);\n    }\n\n  } catch (error) {\n    console.error('Mood Manager API Error:', error);\n    // toastr.error('无法从心情分析API获取数据，请检查您的设置和网络连接。');\n  }\n}\n\n/**\n * 初始化消息监听器\n */\nexport function initializeMessageHandler() {\n  // 监听SillyTavern的消息更新事件\n  eventOn(tavern_events.MESSAGE_UPDATED, onMessageUpdate);\n\n  console.log('Mood Manager message handler initialized.');\n}\n","import { createPinia } from 'pinia';\nimport { createApp } from 'vue';\nimport { createScriptIdDiv, destroyScriptIdDiv, deteleportStyle, teleportStyle } from '../util/script';\nimport FloatingBall from './components/FloatingBall.vue';\nimport SettingsPanel from './components/SettingsPanel.vue';\nimport { initializeMessageHandler } from './core/message-handler';\n\nconst pinia = createPinia();\nconst floatingBallApp = createApp(FloatingBall).use(pinia);\nconst settingsPanelApp = createApp(SettingsPanel).use(pinia);\n\n$(() => {\n  // 挂载悬浮球\n  const $ball = createScriptIdDiv();\n  $('body').append($ball);\n  floatingBallApp.mount($ball[0]);\n\n  // 挂载设置面板\n  const $settings = createScriptIdDiv();\n  $('#extensions_settings2').append($settings);\n  teleportStyle();\n  settingsPanelApp.mount($settings[0]);\n\n  // 初始化消息监听器\n  initializeMessageHandler();\n});\n\n$(window).on('pagehide', () => {\n  floatingBallApp.unmount();\n  settingsPanelApp.unmount();\n  deteleportStyle();\n  destroyScriptIdDiv();\n});\n"],"names":["listToStyles","parentId","list","styles","newStyles","i","length","item","id","part","css","media","sourceMap","parts","push","hasDocument","document","DEBUG","Error","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","ssrIdKey","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","type","appendChild","obj","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","filter","Boolean","join","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","___CSS_LOADER_EXPORT___","module","exports","content","cssMapping","base64","data","concat","sourceMapping","cssWithMappingToString","toString","this","map","needLayer","modules","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","sfc","props","target","__vccOpts","key","val","__esModule","default","locals","add","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","Vue","createScriptIdDiv","$","attr","getScriptId","useMoodStore","latestMood","ref","user","character","updateUserMood","mood","updateCharacterMood","_hoisted_1","class","__name","setup","__props","el","panelPosition","x","window","innerWidth","y","initialValue","_ctx","_cache","ref_key","style","top","left","isPanelOpen","position","togglePanel","onClick","StatusPanel","defaultSettings","isEnabled","apiUrl","apiKey","useSettingsStore","settings","localStorage","mergeDefaults","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","for","$event","async","onMessageUpdate","settingsStore","latestMessage","SillyTavern","chat","slice","contentToAnalyze","mes","response","fetch","method","headers","getRequestHeaders","body","text","is_user","ok","status","json","moodStore","error","console","pinia","floatingBallApp","createApp","FloatingBall","use","settingsPanelApp","SettingsPanel","$ball","append","mount","$settings","$div","clone","teleportStyle","eventOn","tavern_events","MESSAGE_UPDATED","log","on","unmount"],"ignoreList":[],"sourceRoot":""}